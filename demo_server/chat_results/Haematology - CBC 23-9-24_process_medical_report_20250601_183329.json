{
    "status": "error",
    "message": "Unknown error occurred",
    "file_path": "C:\\Users\\chinmay alse\\Desktop\\batch\\Haematology - CBC 23-9-24.pdf",
    "batch_id": "7914306d-40e4-4b3f-8507-9a851172d733",
    "success": true,
    "extracted_text": "Medical Laboratory Report\n\nPatient Name : Mrs MANISHA TAYDE Patient UID No :SURYJ24060007163\nAge and Gender : 45 Years / Female PRN No :F0059-54636823\nCategory : IPD SURYAJ PATHOLOGY LABORATORY-KHUTWAD Registered On :23 Sep 2024 14:17\nNAGAR CENTER Sample UID No. : 110999940\nReferring Doctor : SHRIKANT KHARE\nSample Processed at : MH SURYAJ LAB NASHIK\n\nHEMATOLOGY\nTest Done Observed Value Units Biological Reference Interval\nCOMPLETE BLOOD COUNT\nHaemoglobin 9.36 g/dl 11.0 - 16.0\nPhotometric\nTotal Leucocyte Count 3.75 x 10^3 /µL 4.0-11.0\nElectrical Impedence\nTotal Erythrocyte Count 3.91 x 10^6 /µL 3.5-5.5\nElectrical Impedence\nPlatelet count 175.00 x 10^3 /µL 150 - 410\nElectrical Impedence\nMPV 9.00 fl\nCalculated\nPCT 0.16 %\nElectrical Impedence\nPDW 18.50 %\nElectrical Impedence\nR.B.C. Indices\nP.C.V. 28.50 % 35 - 48\nElectrical Impedence\nM.C.V. 72.90 fl 82 - 95.0\nMeasured\nM.C.H. 23.90 pg 25 - 33\nMeasured\nM.C.H.C 32.80 gm/dl 31.5 - 34.5\nCalculated\nR.D.W. CV 17.90 % 11.0 - 16.0\nCalculated\nDifferential W.B.C. Count\nNeutrophils 54.00 % 40 - 70\nCytochemistry & Impedence/PS\nLymphocytes 34.00 % 20 - 40\nCytochemistry & Impedence/PS\nEosinophils 1.00 % 0 - 6\n\nDr. AKSHAY JOSHI\nMD PATHOLOGIST\n\n~~~ END OF REPORT ~~~\nSample Collected On : 23.09.2024 14:18 Sample Accepted On : 23.09.2024 14:50 E18531\nResults Authenticated : 23.09.2024 15:09 Results Reported : 23.09.2024 15:33 Printed On : 23.09.2024 16:36\n\nPage 1 of 5\n\nCOMPLETE BLOOD COUNT\nDifferential W.B.C. Count\nCytochemistry & Impedence/PS\nMonocytes 11 % 0 - 8\nCytochemistry & Impedence/PS\nBasophils 00 % 0 - 1\nCytochemistry & Impedence/PS\nAbsolute Count\nAbsolute Neutrophil Count 2.02 x 10^3 /µL 1.5 - 8.0\nCalculated\nAbsolute Lymphocyte Count 1.27 x 10^3 /µL\nCalculated\nAbsolute Eosinophil Count 0.04 x 10^3 /µL 0.04 - 0.44\nCalculated\nAbsolute Monocyte Count 0.41 x 10^3 /µL\nCalculated\nAbsolute Basophil Count 0.01 x 10^3 /µL\nCalculated\nPeripheral Smear Findings\nAbnormalities of Erythrocytes Anisocytosis + Microcytes ++, Hypochromia\n+\nAbnormalities of Leucocytes Mild leucopenia\nPlatelets on smear\n\nTest performed on fully automated 5 part differential cell counter.\n\nDr. AKSHAY JOSHI\nMD PATHOLOGIST\n\n~~~ END OF REPORT ~~~\nSample Collected On : 23.09.2024 14:18 Sample Accepted On : 23.09.2024 14:50 E18531\nResults Authenticated : 23.09.2024 15:09 Results Reported : 23.09.2024 15:33 Printed On : 23.09.2024 16:36\n\nPage 2 of 5",
    "extraction_method": "gemini_2.0_flash",
    "report_type": "CBC",
    "confidence": 0.5,
    "keywords_identified": [
        "COMPLETE BLOOD COUNT",
        "Haemoglobin",
        "Total Leucocyte Count",
        "Total Erythrocyte Count",
        "Platelet count"
    ],
    "reason": "",
    "enhanced_text": "```json\n{\n    \"test\": \"Complete Blood Count (CBC)\",\n    \"hospital_lab_name\": \"SURYAJ PATHOLOGY LABORATORY-KHUTWAD\",\n    \"hospital_lab_location\": \"NAGAR CENTER\",\n    \"reported_date\": \"2024/09/23\",\n    \"Patient Name\": \"MANISHA TAYDE\",\n    \"parameters\": [\n        {\n            \"parameter\": \"Hemoglobin\",\n            \"sub_parameter\": \"NA\",\n            \"value\": 9.36,\n            \"units\": \"g/dl\"\n        },\n        {\n            \"parameter\": \"Total WBC/leukocyte count\",\n            \"sub_parameter\": \"NA\",\n            \"value\": 3.75,\n            \"units\": \"x10^3/ul\"\n        },\n        {\n            \"parameter\": \"Total RBC count\",\n            \"sub_parameter\": \"NA\",\n            \"value\": 3.91,\n            \"units\": \"10^6/uL\"\n        },\n        {\n            \"parameter\": \"Platelet count\",\n            \"sub_parameter\": \"NA\",\n            \"value\": 175.00,\n            \"units\": \"x10^3/ul\"\n        },\n        {\n            \"parameter\": \"Hematocrit/PCV\",\n            \"sub_parameter\": \"NA\",\n            \"value\": 28.50,\n            \"units\": \"%\"\n        },\n        {\n            \"parameter\": \"RBC indices\",\n            \"sub_parameter\": \"MCV\",\n            \"value\": 72.90,\n            \"units\": \"fl\"\n        },\n        {\n            \"parameter\": \"RBC indices\",\n            \"sub_parameter\": \"MCH\",\n            \"value\": 23.90,\n            \"units\": \"pg\"\n        },\n        {\n            \"parameter\": \"RBC indices\",\n            \"sub_parameter\": \"MCHC\",\n            \"value\": 32.80,\n            \"units\": \"g/dl\"\n        },\n        {\n            \"parameter\": \"RBC indices\",\n            \"sub_parameter\": \"RDW\",\n            \"value\": 17.90,\n            \"units\": \"%\"\n        },\n        {\n            \"parameter\": \"WBC/Leukocyte differential count\",\n            \"sub_parameter\": \"Neutrophils\",\n            \"value\": 54.00,\n            \"units\": \"%\"\n        },\n        {\n            \"parameter\": \"WBC/Leukocyte differential count\",\n            \"sub_parameter\": \"Lymphocyte\",\n            \"value\": 34.00,\n            \"units\": \"%\"\n        },\n        {\n            \"parameter\": \"WBC/Leukocyte differential count\",\n            \"sub_parameter\": \"Eosinophil\",\n            \"value\": 1.00,\n            \"units\": \"%\"\n        },\n        {\n            \"parameter\": \"WBC/Leukocyte differential count\",\n            \"sub_parameter\": \"Monocyte\",\n            \"value\": 11,\n            \"units\": \"%\"\n        },\n        {\n            \"parameter\": \"WBC/Leukocyte differential count\",\n            \"sub_parameter\": \"Basophil\",\n            \"value\": 00,\n            \"units\": \"%\"\n        }\n    ]\n}\n```",
    "verified_text": "{\n  \"test\": \"Complete Blood Count (CBC)\",\n  \"hospital_lab_name\": \"SURYAJ PATHOLOGY LABORATORY-KHUTWAD\",\n  \"hospital_lab_location\": \"NAGAR CENTER\",\n  \"reported_date\": \"2024 09 23\",\n  \"Patient Name\": \"MANISHA TAYDE\",\n  \"parameters\": [\n    {\n      \"parameter\": \"Hemoglobin\",\n      \"sub_parameter\": \"NA\",\n      \"value\": 9.36,\n      \"units\": \"g dl\"\n    },\n    {\n      \"parameter\": \"Total WBC leukocyte count\",\n      \"sub_parameter\": \"NA\",\n      \"value\": 3.75,\n      \"units\": \"x10^3 ul\"\n    },\n    {\n      \"parameter\": \"Total RBC count\",\n      \"sub_parameter\": \"NA\",\n      \"value\": 3.91,\n      \"units\": \"10^6 uL\"\n    },\n    {\n      \"parameter\": \"Platelet count\",\n      \"sub_parameter\": \"NA\",\n      \"value\": 175.0,\n      \"units\": \"x10^3 ul\"\n    },\n    {\n      \"parameter\": \"Hematocrit PCV\",\n      \"sub_parameter\": \"NA\",\n      \"value\": 28.5,\n      \"units\": \"%\"\n    },\n    {\n      \"parameter\": \"RBC indices\",\n      \"sub_parameter\": \"MCV\",\n      \"value\": 72.9,\n      \"units\": \"fl\"\n    },\n    {\n      \"parameter\": \"RBC indices\",\n      \"sub_parameter\": \"MCH\",\n      \"value\": 23.9,\n      \"units\": \"pg\"\n    },\n    {\n      \"parameter\": \"RBC indices\",\n      \"sub_parameter\": \"MCHC\",\n      \"value\": 32.8,\n      \"units\": \"g dl\"\n    },\n    {\n      \"parameter\": \"RBC indices\",\n      \"sub_parameter\": \"RDW\",\n      \"value\": 17.9,\n      \"units\": \"%\"\n    },\n    {\n      \"parameter\": \"WBC Leukocyte differential count\",\n      \"sub_parameter\": \"Neutrophils\",\n      \"value\": 54.0,\n      \"units\": \"%\"\n    },\n    {\n      \"parameter\": \"WBC Leukocyte differential count\",\n      \"sub_parameter\": \"Lymphocyte\",\n      \"value\": 34.0,\n      \"units\": \"%\"\n    },\n    {\n      \"parameter\": \"WBC Leukocyte differential count\",\n      \"sub_parameter\": \"Eosinophil\",\n      \"value\": 1.0,\n      \"units\": \"%\"\n    },\n    {\n      \"parameter\": \"WBC Leukocyte differential count\",\n      \"sub_parameter\": \"Monocyte\",\n      \"value\": 11.0,\n      \"units\": \"%\"\n    },\n    {\n      \"parameter\": \"WBC Leukocyte differential count\",\n      \"sub_parameter\": \"Basophil\",\n      \"value\": 0.0,\n      \"units\": \"%\"\n    }\n  ]\n}",
    "processing_time": "31.18 seconds",
    "file_processed": "Haematology - CBC 23-9-24.pdf",
    "timestamp": "2025-06-01 18:33:29",
    "json_saved_to": "results\\cbc\\Haematology - CBC 23-9-24_20250601_183329.json",
    "context_messages": [
        {
            "level": "info",
            "message": "Processing medical report: C:\\Users\\chinmay alse\\Desktop\\batch\\Haematology - CBC 23-9-24.pdf"
        },
        {
            "level": "info",
            "message": "Converting PDF to images..."
        },
        {
            "level": "info",
            "message": "Converted PDF to 2 images using enhanced method"
        },
        {
            "level": "info",
            "message": "Successfully converted PDF to 2 images"
        },
        {
            "level": "info",
            "message": "Extracting text using method: auto"
        },
        {
            "level": "info",
            "message": "Attempting extraction with Gemini 2.0 Flash..."
        },
        {
            "level": "info",
            "message": "Extraction with Gemini 2.0 Flash successful"
        },
        {
            "level": "info",
            "message": "Reading classification system prompt..."
        },
        {
            "level": "info",
            "message": "Classifying the medical report..."
        },
        {
            "level": "info",
            "message": "Classification with Gemini successful"
        },
        {
            "level": "info",
            "message": "Classification complete: CBC"
        },
        {
            "level": "info",
            "message": "Enhancing extracted text for report type: CBC"
        },
        {
            "level": "info",
            "message": "Text enhancement successful"
        },
        {
            "level": "info",
            "message": "Verification with Gemini complete"
        },
        {
            "level": "info",
            "message": "Medical report processing complete in 31.18 seconds"
        },
        {
            "level": "warning",
            "message": "Failed to remove temporary image converted_images\\Haematology - CBC 23-9-24_page_1_converted.png: [WinError 32] The process cannot access the file because it is being used by another process: 'converted_images\\\\Haematology - CBC 23-9-24_page_1_converted.png'"
        },
        {
            "level": "warning",
            "message": "Failed to remove temporary image converted_images\\Haematology - CBC 23-9-24_page_2_converted.png: [WinError 32] The process cannot access the file because it is being used by another process: 'converted_images\\\\Haematology - CBC 23-9-24_page_2_converted.png'"
        }
    ]
}